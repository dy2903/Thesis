
% !Mode:: "TeX:UTF-8"


\chapter{绪论}

	
% ==========================课题研究背景及意义============================
\section {课题研究背景及意义}
	随着CMOS工艺的快速发展，数字信号处理的技术在各种系统中得到了长足的发展。现代通信与信息技术、生物医疗电子、消费电子等领域以及诸多军事应用领域随处可见的都是数字信号处理的身影。数字信号处理技术之所以能在社会生活的各个关键领域都有着极为广泛的应用，是因为它可以很好的和计算机或者数字信号处理器（DSP）结合起来，将其灵活高速的特点发挥得淋漓尽致。同时，它还具有较强的抗干扰性，保密性以及易于存储等优点。综上，数字信号处理技术会渐渐替代掉越来越多的模拟信号处理技术。然而，现实世界的信号，如温度、重力、速度等都是连续的模拟信号，为了得到更容易处理的数字信号，肯定离不了连接模拟世界和数字世界的桥梁---模数转换器ADC（Analog to Digital Converter）。完整的数字信号处理(DSP)框图如图\ref{pics/chapter1/ADCInDSP}所示，ADC在信号处理上起着至关重要的作用。因此主流的通信技术，如LTE移动通信技术、卫星通信等的关键模块都使用了高性能的ADC，随着5G时代的到来，对采样率的要求会越来越高，所以研究超高速的ADC非常有必要。\par
	
	我们处在一个数字时代，而我们的视觉、听觉、感觉、嗅觉等所感知的却是一个模拟世界。如何将模拟世界与数字世界联系在一起，正是模拟数字转换器(ADC)大显身手之处。任何一个信号链系统，都需要传感器来探测来自模拟世界的电压、电流、温度、压力等信号。这些传感器探测到的信号量被送到放大器中进行放大，然后通过ADC把模拟信号转化为数字信号，利用处理器、DSP或FPGA对数字信号进行处理，来提取信息或者消除信号的噪声或者失真。所以ADC在信号链的框架中起着桥梁的作用，即模拟世界与数字世界的一个接口。然而对于高速信号处理的应用，ADC的转换速率仍然是一个关键的瓶颈，这因为高速的转换器设计受到硬件的限制。因此，根据目前的IC设计工艺，要实现更高速的采样速率，我们需要探索基于新结构和新方法的ADC。一种实现超高速采样的重要方法就是利用并行交替(Time-interleaved)结构的ADC。这种结构的ADC利用多片相对低速的ADC芯片并行采样来实现超高速的采样率。\par
	
	\pic[htbp]{ADC在信号处理中的作用}{}{pics/chapter1/ADCInDSP}
	
	超宽带（UWB）、医疗仪器与测量等模数混合系统通常对数据精度以及系统的吞吐率和实时性有较高的要求，但是ADC的高速和高精度是一对矛盾体：采样速度越高，则要求转换时间愈短，而同时高精度却需要较长的转换时间。这两者相互制约，所以高速数字信号处理会遇到这样一个瓶颈---很难在单片ADC上实现高的采样速度，同时还能保持高的分辨率。\par
	当前主流的模数转换器都有不同的指标瓶颈，或在频率上或在精度或功耗上。按照电路结构的不同，常把ADC分为如下几类。
	\begin{itemize}
		\item    Flash ADC，通过电容或者电阻阵列将输入信号直接等分，然后以此为标准进行对比，由于采用并行处理结构，可以获得较快的转换速度。但是也是因为并行结构，电路的规模和功耗和比特位数成指数关系。主要应用在雷达、数据获取等分辨率在10比特以下的场所。
		\item
		Pipelined ADC可以获得功耗、转换速度和电路规模的折中，它由多级构成，将输出信号进行分步、分区转换，每级输出部分比特位数，最终结合各级的数字输出。而且可以在子级中引入采样保持电路，实现了各级的并行工作，所以可以低成本下得到更高位数。在图像处理、无线基站上得到广泛的应用。
		\item 
		逐次比较（SAR） ADC结构相对简单，通过逐次产生与采样电压更加接近的电压值，从而得到数字输出。
        SAR ADC充分利用了结构的优势，且只有动态功耗而几乎没有静 态功耗，但是它的工作频率往往比前两种都低，故常用便携设备和工业控制领域。
		\item Sigma-delta ADC是一种通过信号处理方式工作的ADC结构，通过过采样和滤波等技术，有效的提高了分辨率，但是这样的高分辨率是以速度作为代价的，所以常用在不要求转换速度，但是需要高精度的地方，比如音频处理、声纳等。
		\item  分时交替ADC（Time-Interleaved ADC , TIADC）与以上的ADC架构不同，它是一种多路ADC结构，它通过对若干相同的ADC进行分时采样，最终再将所有通道进行合路。理论上，由M块子ADC组成的TIADC系统采样速率是子ADC采样速率的M倍，并且具有子ADC的采样精度。
	\end{itemize}

	根据研究和数据统计结果，图\ref {pics/chapter1/ADCvsRateAndResolution}显示了各种ADC架构与转换速度及分辨率的关系。
	% ========================pic==============
	\pic[htbp]{ADC架构与转换速度、精度的关系}{width=0.7\textwidth}{pics/chapter1/ADCvsRateAndResolution}
	
	正如图\ref {pics/chapter1/ADCvsRateAndResolution}所展示的那样，随着现代的通信系统的吞吐率逐渐的增高，对ADC的采样率要求常常可以达到吉赫兹以上的，此时普通单片的ADC采样频率是难以满足的。在现有工艺条件下制造ADC，要想很好的解决高采样率和低成本的之前的矛盾，使用像TIADC这样多片联合，并行交替采样的技术势在必行\cite{black1980time}\par。所以超高速ADC的研究基本集中在TIADC的研究上。
	对于TIADC来说，主要有两大类--- 时域和频域。
	对于频域来说，主要基于频分滤波器组，利用频域上的频带分割技术。由于这种分割滤波器利用模拟域的滤波器实现，具有极大的复杂度，目前并未普及。
	另一类是通过在时域上，由$M$块子ADC并行起来进行交替采样，而每块子ADC单独的采样率为$\frac{F_s}{M}$
	。理论上，由M块子ADC组成的TIADC系统采样速率是子ADC采样速率的M倍。这种结构实现简单，有成熟的商业产品。比如Stepanovic等人\cite{stepanovic20132} 提出了一个由24个SAR ADC组成的，采样率为2.8GS/s，精度为8比特的芯片。Lee, Sunghyuk等人\cite {lee20141} 设计了一款精度为8比特，采样率为1GS/s的8通道ADC。Chen, Vanessa H-C \cite {chen201469}等人在2014年的国际固态电路会议上展示了一款8通道，采样率为20GS/s的TIADC芯片。
	% =============================1.2========================
	
\section {分时交替ADC国内外研究现状}
	
	分时交替ADC的结构最早于1980年出现在固态电路杂志（Journal of Solid-State Circuits , JSSC）上，WC Black Jr, D Hodges两人阐述了“分时交替ADC”的思想\cite{black1980time}，从此开启了TIADC研究的新浪潮。这种ADC结构，可以在现有工艺条件下，很好的解决高采样率和低成本的之前的矛盾。因为理论上，由M块子ADC组成的TIADC系统采样速率是子ADC采样速率的M倍。如果利用多片低速，但是高精度的ADC构成这样的分时交替结构，可以达到高速高精度的采样效果。尽管如此，分时交替ADC也存在着固有的缺点。由于制造工艺的差异，而制约TIADC发展的最大障碍在于，采样时钟不可能完全理想、由于制造工艺的差异，子ADC不可能完全相同，以及ADC内部存在着寄生效应，而这些因素必然会降低TIADC的采样性能，使得输出信号频谱产生大量的杂散分量，对TIADC的动态性能影响非常大。 如果不进行失配的校准，分辨率很难达到8比特以上。\par
	
	研究得最多的主要有以下几种常见的失配：偏置失配、增益失配、时间偏置失配以及带宽失配等等。
	\begin{itemize}
		\item 偏置失配误差（Offset Mismatch Error ）出现的原因是因为各个通道的ADC有不同的直流偏置系数，这会对被采样信号的频谱进行了搬移。
		\item 增益失配误差（Gain Mismatch Error）是因为每片ADC的增益系数不一样而引起的，所以会对采样信号进行幅度上的调制。这种误差一样会对频谱进行搬移，但是它与采样信号的频率有关。
		\item 时间偏置失配误差（Time Mismatch Error）是由于多相时钟信号并不是完全理想的，而且还可能存在PCB板的布线延时的差异，所以子ADC在采样的时候可能会存在着很小的时间偏差，这会对采样信号进行相位上的调制。		
		\item 带宽失配误差产生原因比较的特殊，它由TIADC各个通道的输入电阻和互联电容以及采样电容和开关电容引起的。只存在于每个子ADC采样前后的频率响应不同的情况下，比如每块子ADC的截止频率不相同。
		
	\end{itemize}
	
	上述的失配误差会产生失配噪声、毛刺信号或者输入信号之间的混叠效应，这些都是超高速ADC的设计和制造的瓶颈所在。正因为如此，对于估计和校准这些算法的研究一直方兴未艾，而同时， 一系列的估计和校准算法也应运而生。
	\par
	自TIADC的结构提出以后，分时交替ADC通道间失配就一直是研究的热点，国内外大量的大学和科研机构投入了大量的精力来研究失配对于动态性能参数的影响。其中Jenq最早通过理论分析，得到了时钟失配误差对信噪比（SNR）的影响的表达式\cite{jenq1988digital}。而Petraglia等人\cite {petraglia1991analysis}分析得到了通道增益失配和偏置失配对动态性能参数的影响。Vogel\cite {vogel2005impact}综合各家观点，集众人之所长，通过数学分析的方法，建立了TIADC等效误差模型，全面分析了各种失配误差对信纳比（SINAD）和无杂散动态范围（SFDR）的影响。这些对通道间失配误差对性能影响的研究分析为提出估计和校准算法奠定了坚实的基础\par
	以下将通过两个小节分别讲述国内外对线性误差和非线性误差的校准的研究。
	分时交替ADC的校准方式大致可以分为两类：
	\begin {enumerate}
		\item 前台技术：这种技术需要已知的测试信号，在离线状态下注入到TIADC系统中从而估计出各个通道的失配信息，然后通过补偿的方式对合路后的输出信号进行重构。		\item 后台技术：可以不用打断TIADC的工作进程，而且不需要输入信号的特性，通过自适应的方式进行失配参数的估计进而进行校准。
	\end {enumerate}
	
	% ======================subsection ========================
	
	\subsection {线性误差校准国内外研究现状}
	
		
		前台技术：这种技术需要已知的信号，比如标准正弦信号，注入到离线状态下的TIADC系统中。这样可以利用已知的导频测试信号估计出各个通道的失配信息，然后通过综合滤波器组对合路后的输出信号进行重构。因为必须注入到离线平台里面，这种方法适用性有极大的局限性。它不太适合于那种不能停止的系统中，比如通信系统。而实际上，由于温度变化和老化的缘故，估计和校准必须经常进行。所以这种方法主要应用于高端的测量系统中，这些测量用的精密可以经常送检。\par
		
		后台技术：和前台技术最大的不同在于，失配的估计和校准可以在TIADC正常工作的时候进行，也就是说可以不用打断TIADC的工作进程。这样的后台校准技术可以分为盲自适应校准技术和非盲校准技术。\par
		对于非盲校准技术来说，必须在模拟域进行更多的工作，需要去轻微修改一下模拟域中的输入信号，通过这样的方法来校准失配。比如说，对于偏置误差和增益误差的校准，可以生成一些随机的信号，这样的信号即可以和模拟输入相加，又可以和模拟输入相乘。文献就提供的一种带宽失配误差的校准方法就是通过在TIADC的输入端加上一个已知的正弦信号。\par


		对于盲自适应校准技术来说，校准方法会相对复杂得多。因为只有实际的输入来作为参考。大多数情况下，对失配误差的盲校准主要在数字域，少数除外。如果对误差的校准都在数字域进行的话，可以归类为全数字域校准。如果校准需要结合模拟前端的反馈的话，可以归类为数模混合校准。\par
		但是实际上，这两种方法都不可能完全做到盲校准，因为它们一定需要一些输入信号的先验信息，比如输入信号的频谱或者统计特性等等。\par
	
		早先基于单片电路并行交替ADC的修正一般利用对前端电路的修调，精心的布局布线来减少通道间失配误差的影响。修调方法的缺点就是当时间，温度和工艺改变后，修正的结果就变为无效。利用数字的方法把通道间失配误差进行平均化，可以部分改善修调结果。然而这使得每个通道的输入频带为Nyquist频率的1/2，即fs/4。另外前端修正需要中断采样过程，这在很多应用中是所希望看到的，从而限制了这种方法的应用。
		为了克服前端修正方法的缺陷，可以利用后端处理的方法，后端处理方法需要打断正常ADC的运作，并且对用户来说也是透明的。
		
		
			\subsubsection {盲自适应校准技术}
				偏置误差估计方面，最简单的方法就是直接去算每个通道的平均值，然后减去相应的平均值即可。这样的话，对于每一个通道只需要额外增加一个加法器，可以极大的节省硬件资源。
				对于增益误差，相似的方法进行消除。所以				
				对于偏置误差和增益误差可以通过简单的加法器或者乘法器进行估计和校准。相对于这两种误差，时钟失配更加的麻烦，校准更具挑战性。所以大量论文都是致力于时钟失配的校准。\par
				
				在时钟失配估计方面，既可以在时域上进行也可以在频域上进行。大多数的方法假设输入信号受限于奈奎斯特频率。\par
				
				文献\cite{divi2009blind}提到了基于频率的方法，但这种方法对信号特性有极大的要求。
				
				文献\cite {luo2013coordinated}中提出的方法通过最小化相邻通道的互相关函数而得的代价方程。
				文献\cite {le201422}发现了每个子通道的输出的采样和它的衍生物的采样之间的向量积和相应的时钟偏置成线性的关系。基于这样一种方法，可以很方便的估计出时钟的偏置误差。
				% =================	
				混合校准技术
				大多数的数模混合校准技术都需要1块甚至更多的子ADC。所谓数模混合校准，特别是在时钟误差的校准过程中，只有一部分是在数字域中。文献\cite{vogel2004compensation}\cite{el2003new}\cite {vogel2004compensation}中提到的方法对各个通道的采样顺序进行随机的重组，这样可以把失配误差分散到整个频谱中去。
				
				在文献中，时钟失配误差在数字域中进行估计，它通过使得所有通道的互相关最小的方法，求出各个通道的时钟失配误差。然后在模拟域中进行相应的校准，方法是加上相应的延迟线。
				
				文献中，偏置失配误差的校准是通过前置放大器，
				时钟失配误差的校准分两步执行。首先在参考ADC中保存一个固定序列，该序列通过输入一个已知的二进制序列。然后需要校准的子ADC一个一个的卸载下来，用参考ADC来进行代替。他们的采样时间在模拟域进行校准。通过比较他们的输出和参考ADC的签名，当输入相同的二进制序列的时候。				
				
				文献：时钟延迟校准是通过可编程的延迟线，比较子ADC的输出和一个flash ADC的，这个ADC运行在TIADC全体的采样频率中。
				
				提出的技术：需要两个额外的通道，一个作为参考通道，另一个略有延迟。这两个通道的差值给出了一个粗略的估计，对于信号的衍生物。可以用在基于相关的自适应算法中。通过一系列的电容来进行时钟失配的校准。
				
				提出的数模混合校准技术不需要额外的ADC，但是它假设信道是高斯白噪声的，可以通过一种基于相关性的自适应算法对时钟偏移进行估计。
				
				% =========
				纯数字校准
				
				可以用来替代模拟校准。
				
				偏置误差可以通过直接把估计出来的偏置失配直接减去，只需要为每一个通道加一个加法器。同理，增益误差的校准可以通过为每一个通道乘以增益误差的估计值的倒数，所以每一个通道只需要一个乘法器。\par
				如果要在纯数字域上作时钟失配误差的校准，需要消耗更多的滤波器来使用正确的采样时间来恢复采样点。
				
				受到的启发。它基于这样的事实，每一个通道的时钟上的偏移和采样的周期相比而已都非常的小。在这样特定的情况下，采样信号可以通过对时钟失配误差做一阶泰勒展开式来进行恢复。这需要将TIADC的采样点通过数字差分FIR滤波器得到的信号衍生物。
				\par
				
				还可以通过分数倍延迟数字滤波器进行信号的重构。
				但是，和基于衍生物的方法一样，需要大量的数字滤波器。
				
				
				
				
					
					
				并行交替ADC系统通道间的失配误差及其数字后处理修正算法是目前并行交替型设计的关键所在。在TIADC并行采集系统中，对于通道间失配误差的修正方法，增益误差和偏置误差相对比较容易修正;而对时间相位误差的修正却比较困难，它的修正方法与周期非均匀采样信号的完美重构问题相等价。现行的算法主要有：
一、	基于测试信号校准
1.	利用正弦测试信号[4]，基于频谱分析给了时基误差的估计方法。
2.	利用锯齿波作为测试输入信号[5]，实现了对时基误差的估计。
3.	利用最小二乘的正弦参数拟合算法给了时基误差的估计[6]，但参数估计的方法对系统噪声较敏感。
以上方法都利用已知的测试输入信号进行估计，虽算法简单，但对测试输入信号要求高，算法的精度也依赖于测试输入信号的精度；同时误差测试需要独立于设备日常采样进行，无法后台实现


二、	自适应的校准
1.	基于FFT的频域抵消算法[7], 通过对各通道信号进行FFT运算后侦测到误差频率成分，并通过加权平均抵消误差分量从而实现误差的校准。
2.	基于分数倍延迟滤波的校准[8], 将子ADC的输直接通过分数倍延迟滤波器完成时钟误差的校准。该方法由于滤波器工作在单通道采样速率下，限制了采样的带宽
3.	基于通道间相关性的误差估计[9]，基于时域通道间相关性的失配误差估计算法，该种估计算法原理简单且易于实现，同时资源消耗也相当少，但是需要大量的数据做统计。
4.	基于完美重构的失配误差校准算法[10]，通过对时钟误差的失配表达式进行了泰勒级数二阶展开，使得对时钟误差的校准只需利用固定抽头系数的微分器即可完成校准，而需要实现可变系数的滤波器，大大简化的校准电路的实现。
5.	基于LMS算法的自适应校准算法[11]，在算法的推导过程中，使用了一阶泰勒近似采用了Farrow近似或者是FMC计算而得到自适应滤波的结构，导致与基于FFT的时钟失配估计算法相比，估计精度相对较低。
1)	基于Farrow结构的自适应数字校准算法[12]，虽然结构很简单，但是可避免的过渡带损失而且有子通道采样速率的限制。
2)	基于FMC结构的自适应校准算法[13]，结构特点为数字滤波器与乘法器的级联，且数字滤波器为有限长冲激响应，额外引入了增益误差。
过上述通道失配误差估计算法大都针对单一误差进行估计。而在实际应用中，通常系统中三种误差都同时存在，我们面对的是三种误差所带来的综合影响；且上述非均匀误差估计算法大都假设系统的失配误差是固定的，也就意味着算法无法跟踪由于仪器老化、温度等环境参数所造成的失配误差的变化。这些都为我们在实际的系统设计中的误差估计带来了难度，如何进行更为有效的非均匀误差估计成为并行采样所要解决的首要问题；运算量过大、实时性差等未很好解决的问题，也需要在研究中重点考虑。

	
	% ======================subsection ========================
	\subsection {非线性误差校准国内外研究现状}
	随着对高性能的要求日益增加，使用单芯片的ADC越来越难以同时满足高采样率和高分辨率了。为了解决这样的矛盾，Black和Hodges提出了一种新型的采样系统，它含有M个并行的相同的ADC，这些ADC们工作在循环采样的状态下。这样的结构通过系数M来增加采样频率。但是，TIADC对各个通道的失配非常的敏感，一个很小的偏差可以会对整体的性能造成非常严重的损害。
	\par
	为了理解和减轻偏置误差、增益失配误差、时钟失配误差和带宽失配误差的影响，国内外的研究人员已经做了大量的工作。总体来说，对失配误差的校正可以在前台进行（使用测试信号），又可以在后端进行（盲校准）。对前台估计的算法，需要使用一个测试信号（正弦波、方波甚至是直流信号）来判断通道的失配。而对于后台估计的算法而言，需要利用的是TIADC的输出信号。大多数的后台技术需要对输入信号进行一些假设（比如轻微过采样，广义平稳性或者稀疏的频谱）\par
	非线性失配是由模拟前端的芯片以及各个通道的不完美而引入的。和典型且众所周知的通道失配相比，（比如偏置、增益、时钟和频率响应失配）非线性失配在频谱中产生 额外的失真。这些额外的频谱分量同样会造成动态性能参数的恶化，比如无杂散动态范围（SFDR）特别是在高精度的应用场景。因此，为了增强TIADC的动态性能，我们需要考虑和校准非线性失配而不是仅仅只考虑典型的通道失配的影响。但是只有一部分的著作讨论了TIADC的非线性误差。
	文献推导了DNL和INL的公式，但是建立的误差模型不能完全的刻画真实交织的采样系统。
	文献：通道的非线性失配的影响得到了分析和仿真，但是作者没有给出详细的数学推导过程。
	这两篇文章中，作者分析了非线性失配误差的频谱特征，而且通过混合滤波器组搭建了数学模型。同时还介绍了一种通过随机化策略来进行校准的方法。但是这样的策略需要额外的ADC，也因此会造成硬件耗费的增加。
	文献提出了一种非常高效的建立在多项式模型的单芯片INL估计算法，当对INL的近似算法已经很充分的情况下。	然而这种基于频谱的方法没有把时间交替ADC的结构考虑进去。如果直接用在TIADC身上，会消耗掉更多的计算资源。
	
	本文中，我们提出了一个估计和校准的算法，这种算法可以用来补偿用多项式进行表达的非线性失配。这种策略可以分为两步：首先，通过一个正弦的测试信号进行前台估计，然后使用由乘法器和加法器组成的级联结构进行数字域上的补偿。
	\begin{enumerate}
		\item 分析非线性失配误差：从一个较为抽象的层次，我们建立一个M通道的包含非线性误差的TIADC误差模型，同时用L阶多项式来表示误差。这个模型是提出的，我们在他们的工作上加上了非线性误差对SNDR的影响的仿真图像。这些结果可以用在TIADC的设计阶段，通过这些结果可以判断出误差的容忍程度以及对估计和校准算法的精确度的要求。
		\item 前端估计算法：我们提出了一个非线性误差的前台估计算法。通过这种方法可以获得独立的失配频谱分量，然后把它们做离散傅里叶逆变换，从而得到多项式的系数。这种方法可以获得上文提到的基于频谱的方法的精确度，但是消耗的资源更少。
		我们同时分析了当偏置失配、增益失配、时钟失配同时存在的情况。然而需要注意的是，如果没有把非线性误差考虑进去，这种针对偏置、增益误差的基于频谱的前台估计算法会被非线性误差而影响。
		\item 数字校准方法。我们介绍了一种基于级联的乘法器和加法器的补偿结构。这种方法可以直接利用估计出来的用多项式表达的非线性误差失配模型的系数。和那种使用随机化的方法，这种方法可以获得更高的效率，而且不需要使用额外的ADC
	\end {enumerate}
	
	
	
\section {研究目的及思路}
\section {论文结构与工作安排}


